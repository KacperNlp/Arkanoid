<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>JSDoc: Source: Sprite.esm.js</title>

    <script src="scripts/prettify/prettify.js"> </script>
    <script src="scripts/prettify/lang-css.js"> </script>
    <!--[if lt IE 9]>
      <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <link type="text/css" rel="stylesheet" href="styles/prettify-tomorrow.css">
    <link type="text/css" rel="stylesheet" href="styles/jsdoc-default.css">
</head>

<body>

<div id="main">

    <h1 class="page-title">Source: Sprite.esm.js</h1>

    



    
    <section>
        <article>
            <pre class="prettyprint source linenums"><code>import { canvas } from "./Canvas.esm.js";

/**
 * @typedef {{x:number, y:number}} offset
 * class for creating Sprite object for elements
 */
export class Sprite {
  /**
   * Create a sprite object by this props
   * @param {!number} spriteX The x-axis of coordination of the top left corner of the sub-rectengle of the source image to draw into the destination context
   * @param {!number} spriteY The y-axis of coordination of the top left corner of the sub-rectengle of the source image to draw into the destination context
   * @param {!number} width The width of the sub-rectengle of the source image to draw into the destination context
   * @param {!number} height The height of the sub-rectengle of the source image to draw into the destination context
   * @param {!CanvasImageSource} spritesImage An element to draw into the context
   * @param {!number} posX Position sprite element of x-axis in canvas
   * @param {!number} posY Position sprite element of y-axis in canvas
   * @param {number} [numberOfSprites = 1] Default numberOfSprites = 1, number of sprite images in the main image
   * @param {offset} [offset ={x:0, y:0}] Default  = {x:0, y:0}, offset to draw
   */
  constructor(
    spriteX,
    spriteY,
    width,
    height,
    spritesImage,
    posX,
    posY,
    numberOfSprites = 1,
    offset = { x: 0, y: 0 }
  ) {
    /**
     * @type {!number}
     */
    this.alpha = 255;
    this.posX = posX;
    this.posY = posY;
    this.width = width;
    this.height = height;
    this.numberOfSprites = numberOfSprites;
    this.spritesImage = spritesImage;
    this.startSpriteX = spriteX;
    this.startSpriteY = spriteY;
    this.offset = { ...offset };
  }

  #canvas = canvas;

  /**
   * Method to draw the sprite into the canvas context
   * @param {number} [numberOfSprites = 0] number of index sprite to draw used to take position of image in sprite
   * @param {number} [ratio = 1] scale of sprite
   */
  draw(numberOfSprites = 0, ratio = 1) {
    if (numberOfSprites > this.numberOfSprites) return null;

    if (this.alpha !== 255) {
      this.#canvas.context.globalAlpha = this.alpha / 255;
    }

    const spritePosX = this.startSpriteX + numberOfSprites * this.width;

    this.#canvas.context.drawImage(
      this.spritesImage,
      spritePosX,
      this.startSpriteY,
      this.width,
      this.height,
      this.posX + this.offset.x,
      this.posY + this.offset.y,
      this.width * ratio,
      this.height * ratio
    );

    if (this.alpha !== 255) {
      this.#canvas.context.globalAlpha = 1;
    }
  }

  checkCollisionWithAnotherSprite(vector, anotherSprite) {
    const [
      vectorDirectionX,
      vectorDirectionY,
    ] = this.#getDirectionsOfCurrentElement(vector);

    if (
      vectorDirectionX > anotherSprite.posX &amp;&amp;
      vectorDirectionX &lt; anotherSprite.posX + anotherSprite.width &amp;&amp;
      vectorDirectionY > anotherSprite.posY &amp;&amp;
      vectorDirectionY &lt; anotherSprite.posY + anotherSprite.height
    ) {
      return true;
    }

    return false;
  }

  #getDirectionsOfCurrentElement(vector) {
    const { directionX, directionY } = vector;

    const vectorDirectionX =
      directionX &lt; 0 ? this.posX : this.posX + this.width;
    const vectorDirectionY =
      directionY &lt; 0 ? this.posY : this.posY + this.height;

    return [vectorDirectionX, vectorDirectionY];
  }
}
</code></pre>
        </article>
    </section>




</div>

<nav>
    <h2><a href="index.html">Home</a></h2><h3>Classes</h3><ul><li><a href="Common.html">Common</a></li><li><a href="Sprite_Sprite.html">Sprite</a></li></ul><h3><a href="global.html">Global</a></h3>
</nav>

<br class="clear">

<footer>
    Documentation generated by <a href="https://github.com/jsdoc/jsdoc">JSDoc 3.6.6</a> on Tue Feb 02 2021 22:39:43 GMT+0100 (GMT+01:00)
</footer>

<script> prettyPrint(); </script>
<script src="scripts/linenumber.js"> </script>
</body>
</html>
